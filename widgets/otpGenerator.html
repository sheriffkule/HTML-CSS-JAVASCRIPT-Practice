<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simple OTP Generator</title>
  <link rel="stylesheet" href="/widgets_style/otpGenerator.css">
</head>

<body>
  <div class="container">
    <h1>OTP Generator</h1>
    <button id="generateBtn">Generate OTP</button>
    <p id="otpDisplay">Code</p>
    <button id="copy-code" onclick="copyCode()">Copy</button>
  </div>
  <script>
    let generateOTP = () => {
      const otpLength = 6;

      const otp = Math.floor(Math.random() * Math.pow(10, otpLength));

      document.getElementById('otpDisplay').innerText = `${otp}`;
    };

    document.getElementById('generateBtn').addEventListener('click', generateOTP);

  function copyCode() {
    const otpDisplay = document.getElementById('otpDisplay');
    const otp = otpDisplay.innerText;

    const tempTextarea = document.createElement('textarea');
    tempTextarea.value = otp;

    document.body.appendChild(tempTextarea);

    tempTextarea.select();
    tempTextarea.setSelectionRange(0, 999999);

    document.execCommand("copy");

    document.body.removeChild(tempTextarea);

    const copyButton = document.getElementById('copy-code');
    copyButton.innerText = "Copied!";
    copyButton.style.background = 'green';
    setTimeout(() => {
      copyButton.innerText = "Copy";
      copyButton.style.background = '';
    }, 2000);
  }
    
  </script>
</body>

</html>